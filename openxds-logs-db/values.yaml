mariadb:
  image:
    repository: mariadb
    tag: "10.5"
    pullPolicy: Always
    debug: false
  auth:
    database: "openxds-logs"
    username: "openxds-logs"
    ## @param auth.existingSecret Use existing secret for password details (`auth.rootPassword`, `auth.password`, `auth.replicationPassword` will be ignored and picked up from this secret). The secret has to contain the keys `mariadb-root-password`, `mariadb-replication-password` and `mariadb-password`
    ##
    existingSecret: openxds-logs-database-credentials

  primary:
    extraVolumes:
      - name: mysql
        emtpyDir: {}
    extraVolumeMounts:
      - name: mysql
        mountPath: /var/lib/mysql
    configMapMountPaths:
      db.sql:
        configMapMountPath: /docker-entrypoint-initdb.d/db.sql
        configMapMountSubPath: db.sql
      my.cnf:
        configMapMountPath: /etc/mysql/my.cnf
        configMapMountSubPath: my.cnf
  extraConfigMap:
    db.sql: |
      -- MySQL dump 10.13  Distrib 5.7.18, for Linux (x86_64)
      --
      -- Host: localhost    Database: openxdslogs
      -- ------------------------------------------------------
      -- Server version	5.7.18

      /*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
      /*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
      /*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
      /*!40101 SET NAMES utf8 */;
      /*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
      /*!40103 SET TIME_ZONE='+00:00' */;
      /*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
      /*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
      /*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
      /*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

      --
      -- Table structure for table `error`
      --

      DROP TABLE IF EXISTS `error`;
      /*!40101 SET @saved_cs_client     = @@character_set_client */;
      /*!40101 SET character_set_client = utf8 */;
      CREATE TABLE `error` (
        `id` varchar(255) NOT NULL,
        `name` varchar(255) DEFAULT NULL,
        `value` mediumtext,
        `messageID` varchar(255) NOT NULL,
        PRIMARY KEY (`id`),
        KEY `FK5C4D20858D0DAB` (`messageID`),
        CONSTRAINT `FK5C4D20858D0DAB` FOREIGN KEY (`messageID`) REFERENCES `main` (`messageID`)
      ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
      /*!40101 SET character_set_client = @saved_cs_client */;

      --
      -- Table structure for table `http`
      --

      DROP TABLE IF EXISTS `http`;
      /*!40101 SET @saved_cs_client     = @@character_set_client */;
      /*!40101 SET character_set_client = utf8 */;
      CREATE TABLE `http` (
        `id` varchar(255) NOT NULL,
        `name` varchar(255) DEFAULT NULL,
        `value` mediumtext,
        `messageID` varchar(255) NOT NULL,
        PRIMARY KEY (`id`),
        KEY `FK31088858D0DAB` (`messageID`),
        CONSTRAINT `FK31088858D0DAB` FOREIGN KEY (`messageID`) REFERENCES `main` (`messageID`)
      ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
      /*!40101 SET character_set_client = @saved_cs_client */;

      --
      -- Table structure for table `ip`
      --

      DROP TABLE IF EXISTS `ip`;
      /*!40101 SET @saved_cs_client     = @@character_set_client */;
      /*!40101 SET character_set_client = utf8 */;
      CREATE TABLE `ip` (
        `ip` varchar(255) NOT NULL,
        `company_name` varchar(255) DEFAULT NULL,
        `email` varchar(255) DEFAULT NULL,
        PRIMARY KEY (`ip`)
      ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
      /*!40101 SET character_set_client = @saved_cs_client */;

      --
      -- Table structure for table `main`
      --

      DROP TABLE IF EXISTS `main`;
      /*!40101 SET @saved_cs_client     = @@character_set_client */;
      /*!40101 SET character_set_client = utf8 */;
      CREATE TABLE `main` (
        `messageID` varchar(255) NOT NULL,
        `pass` bit(1) DEFAULT NULL,
        `is_secure` bit(1) DEFAULT NULL,
        `test` mediumtext,
        `timereceived` datetime DEFAULT NULL,
        `ip` varchar(255) DEFAULT NULL,
        PRIMARY KEY (`messageID`),
        KEY `FK3305B9B029AFAA` (`ip`),
        CONSTRAINT `FK3305B9B029AFAA` FOREIGN KEY (`ip`) REFERENCES `ip` (`ip`)
      ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
      /*!40101 SET character_set_client = @saved_cs_client */;

      --
      -- Table structure for table `other`
      --

      DROP TABLE IF EXISTS `other`;
      /*!40101 SET @saved_cs_client     = @@character_set_client */;
      /*!40101 SET character_set_client = utf8 */;
      CREATE TABLE `other` (
        `id` varchar(255) NOT NULL,
        `name` varchar(255) DEFAULT NULL,
        `value` mediumtext,
        `messageID` varchar(255) NOT NULL,
        PRIMARY KEY (`id`),
        KEY `FK6527F1058D0DAB` (`messageID`),
        CONSTRAINT `FK6527F1058D0DAB` FOREIGN KEY (`messageID`) REFERENCES `main` (`messageID`)
      ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
      /*!40101 SET character_set_client = @saved_cs_client */;

      --
      -- Table structure for table `soap`
      --

      DROP TABLE IF EXISTS `soap`;
      /*!40101 SET @saved_cs_client     = @@character_set_client */;
      /*!40101 SET character_set_client = utf8 */;
      CREATE TABLE `soap` (
        `id` varchar(255) NOT NULL,
        `name` varchar(255) DEFAULT NULL,
        `value` mediumtext,
        `messageID` varchar(255) NOT NULL,
        PRIMARY KEY (`id`),
        KEY `FK35F38B58D0DAB` (`messageID`),
        CONSTRAINT `FK35F38B58D0DAB` FOREIGN KEY (`messageID`) REFERENCES `main` (`messageID`)
      ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
      /*!40101 SET character_set_client = @saved_cs_client */;
      /*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

      /*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
      /*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
      /*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
      /*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
      /*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
      /*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
      /*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

      -- Dump completed on 2018-08-20 20:00:28
    my.cnf: |
      [mysqld]
      skip-host-cache
      skip-name-resolve
      datadir = /var/lib/mysql
      !includedir /etc/mysql/conf.d/
      lower_case_table_names = 1
      general_log = 1
      general_log_file = /var/lib/mysql/mysql.log

namespace: oth-sync
sealedSecrets:
  openxds-logs-database-credentials:
    encryptedData:
      auth.rootPassword: AgArqVFPOglXoZd5rUIin94cruAZMfLMf+03bqFIeDZvpLoqGhhvMO8+3i7ZhIWvkf/FR13SKtVMauIuk/VEi5svC3+FIv75ILL1lnoDU6IhMj9oljPUJvzwApQLHrc5QrGD2coUneydvICvwMFZx3ODcgcNR1iVAv+Cof9QPAa0gNUET1XmL7E9d4sS6d14c3+aXz3okfkSonnq349O5UiWzMj3OkuHYBLiv3bmCUvUrnRBVr4x/jfBB7/1PQKa9iDj+TXQzDTkYjFgYDCXK/gq+WcKarUV+n0zW+d7D3jSuYDu/pNN5es50WI4tQwXlOorTU6A5Z/VEuMGBHXYRmkb4jf5K0jHXeO63f9JDxztgM45welYr57BeVDbrlXCcCm2VeGb0BXqRxsQ4052shH/aSDrH8viHMyki07XJhglmqRfDnccQdBF+yEhNP+3TL43GCSruHt5Eoz7b9Mm4+FIA865966FwoC8372Ij9tFrl1llon6ahlqA7oXHZ2qhfBofIB3v40JdUZHeuCNnV8PMZpCgXqyszIbIDbDIAnQSvdOIexy04ZtW4MFiPK5pgArvPzgj99aAWAkIF+p5gpiFEfs19kKkuSawVadncZiK7+ZegZOhMhqaJPa7sBo213y7KlbR7aN29E3VErD3SqZaxcfEEmxhK8J6UklbXlo2CdxWTTY6ONx/OVq1v+AKu9TQV3tFnZnZ4IcSNEBPO4i
      mariadb-root-password: AgArqVFPOglXoZd5rUIin94cruAZMfLMf+03bqFIeDZvpLoqGhhvMO8+3i7ZhIWvkf/FR13SKtVMauIuk/VEi5svC3+FIv75ILL1lnoDU6IhMj9oljPUJvzwApQLHrc5QrGD2coUneydvICvwMFZx3ODcgcNR1iVAv+Cof9QPAa0gNUET1XmL7E9d4sS6d14c3+aXz3okfkSonnq349O5UiWzMj3OkuHYBLiv3bmCUvUrnRBVr4x/jfBB7/1PQKa9iDj+TXQzDTkYjFgYDCXK/gq+WcKarUV+n0zW+d7D3jSuYDu/pNN5es50WI4tQwXlOorTU6A5Z/VEuMGBHXYRmkb4jf5K0jHXeO63f9JDxztgM45welYr57BeVDbrlXCcCm2VeGb0BXqRxsQ4052shH/aSDrH8viHMyki07XJhglmqRfDnccQdBF+yEhNP+3TL43GCSruHt5Eoz7b9Mm4+FIA865966FwoC8372Ij9tFrl1llon6ahlqA7oXHZ2qhfBofIB3v40JdUZHeuCNnV8PMZpCgXqyszIbIDbDIAnQSvdOIexy04ZtW4MFiPK5pgArvPzgj99aAWAkIF+p5gpiFEfs19kKkuSawVadncZiK7+ZegZOhMhqaJPa7sBo213y7KlbR7aN29E3VErD3SqZaxcfEEmxhK8J6UklbXlo2CdxWTTY6ONx/OVq1v+AKu9TQV3tFnZnZ4IcSNEBPO4i
      auth.password: AgBY6v+YlZkauceMkWFw4sub+drktzf6XJfGXdWM8lxtGhAZO+Em9WmvZaqwKdhZ/2heW0MZNydYs2tSDUB1XQP14ESX9z2Tuwt9axNYilKp5Lw5SeN7U90vbWmNZe6rigjNpSa0fpT3UiEkpof4qWA5Upqz0vqFcW7NcJHI2KqbKVtCeWmYgirszky55fbl1FMfx5lIQE9uzE41/esu7BwRwKFVhGL0jyFg8H6mpDy34hLEvn3EfROJ8UZVd620+Fpx0C7zWFvycKSDybMBIp45mhL6jx59RV4jSHGF36mWxF9NArmhxqR7E7JPj1y3BeP9E5WjqYbKhRFsWAtrtHkat9xjB5hUGVP6L5v8SnRl5WH0ds5lNaO9s/TESUth9gLixQ1iV4oiUK6iBLWdjEFuOPCZ3Z4dB7eRfMwH+HI9Rg1OgcadjhEnGRE6OZP5P0aQfQvppzs2WaONNOIxlLO5038ZS23LZNXEyuqfxcgW8TvQnL27eybmCx/ClDphWZY1JBeRLwscL6cUGfnX2RQJAUyrD2RUWEYvZFS+0mJEyUF98kNum0XGLTV66KDTmM2GsA3aU12sYYFxfRPJL8/rLX0x0C8SRNVuAAus34pIPbrYvgnHCnC40EYtXm+mWW+5cus0eb7ZViNAqsoyk5OyL/f5flInpE3XvQyWH/43bMdSlmoGToF5kpt7wUqpdk5BeyeKO7D3M4xY8wNDJi7S
      mariadb-password: AgBY6v+YlZkauceMkWFw4sub+drktzf6XJfGXdWM8lxtGhAZO+Em9WmvZaqwKdhZ/2heW0MZNydYs2tSDUB1XQP14ESX9z2Tuwt9axNYilKp5Lw5SeN7U90vbWmNZe6rigjNpSa0fpT3UiEkpof4qWA5Upqz0vqFcW7NcJHI2KqbKVtCeWmYgirszky55fbl1FMfx5lIQE9uzE41/esu7BwRwKFVhGL0jyFg8H6mpDy34hLEvn3EfROJ8UZVd620+Fpx0C7zWFvycKSDybMBIp45mhL6jx59RV4jSHGF36mWxF9NArmhxqR7E7JPj1y3BeP9E5WjqYbKhRFsWAtrtHkat9xjB5hUGVP6L5v8SnRl5WH0ds5lNaO9s/TESUth9gLixQ1iV4oiUK6iBLWdjEFuOPCZ3Z4dB7eRfMwH+HI9Rg1OgcadjhEnGRE6OZP5P0aQfQvppzs2WaONNOIxlLO5038ZS23LZNXEyuqfxcgW8TvQnL27eybmCx/ClDphWZY1JBeRLwscL6cUGfnX2RQJAUyrD2RUWEYvZFS+0mJEyUF98kNum0XGLTV66KDTmM2GsA3aU12sYYFxfRPJL8/rLX0x0C8SRNVuAAus34pIPbrYvgnHCnC40EYtXm+mWW+5cus0eb7ZViNAqsoyk5OyL/f5flInpE3XvQyWH/43bMdSlmoGToF5kpt7wUqpdk5BeyeKO7D3M4xY8wNDJi7S
