service:
  namespace: oth-sync
  fullnameOverride: dgwsxdsvalidationproxy
  image:
    repository: kvalitetsit/dgwsxdsvalidationproxy
  ingress:
    enabled: true
    annotations:
      kubernetes.io/ingress.class: "nginx"
      cert-manager.io/cluster-issuer: letsencrypt-prod
      nginx.ingress.kubernetes.io/configuration-snippet: |
        more_set_headers "X-Request-Id: $req_id";
    hosts:
      - host: dgwsxdsvalidationproxy.oth-sync.t0.hosting.kitkube.dk
        paths:
          - path: /
    tls:
      - hosts:
          - dgwsxdsvalidationproxy.oth-sync.t0.hosting.kitkube.dk
        secretName: dgwsxdsvalidationproxy.oth-sync.t0.hosting.kitkube.dk

  deployment:
    env:
      LOG_MAX_FILE_SIZE:
        value: "10MB"
      LOG_MAX_BACKUP_INDEX:
        value: 5
      ITI41_BACKEND_URL:
        value: "unknown"
      ITI43_BACKEND_URL:
        value: "uknown"
      LOGGING_RULES_LOG_CPRNUMBER:
        value: "true"
      LOGGING_RULES_LOG_CLINICAL_DOCUMENT:
        value: "true"
      VALIDATION_RULES_VALIDATE_DOCUMENT:
        value: "true"
      VALIDATION_RULES_CONTINUE_ON_ERROR:
        value: "false"
      REPORTING_RULES_REPORT_DOCUMENT:
        value: "true"
      ALLOW_ITI41:
        value: "true"
      ALLOW_ITI43:
        value: "false"
      CDA_VALIDATION_CLIENT_ENDPOINT:
        value: "unknown"
      DOCUMENT_TYPE_CODES_CODE:
        value: "53576-5;74468-0;74465-6;39289-4;"
      DOCUMENT_TYPE_CODES_NAME:
        value: "PHMR;QFDD;QRD;APD;"
      LOG_CDA_DOCUMENT_DECODE_EXCEPTION:
        value: "true"
      LOG_CDA_DOCUMENT_DECODE:
        value: "false"
      http_client_max_total_connections:
        value: "2"
      http_client_defalt_max_connections_per_route:
        value: "2"
      SERVICE_VERSION:
        value: "v1.3.9"
      LOG_LEVEL:
        value: "INFO"
      NSP_TEST_FEDERATION:
        value: "true"
      # TODO: maybe use these variables instead of configmap cra-ds.xml
      # NSP_CRA_DB_HOST:
      #   value: "cradb-mariadb-0"
      # NSP_CRA_DB_USER:
      #   value: "dgwsxdsvalidationproxy"
      # NSP_CRA_DB_PASSWORD:
      #   type: secretKeyRef
      #   name: dgwsxdsvalidationproxy-cra-database-credentials
      #   key: password
      # NSP_CRA_DB_POOL_MIN:
      #   value: "2"
      # NSP_CRA_DB_POOL_MAX:
      #   value: "20"

  # sealedSecret:
  #   dgwsxdsvalidationproxy-cra-database-credentials:
  #     encryptedData:
  #       password: AgBSlrQHaZcapGzUsZwOwCCmQBOctkANOB6R7X0/CZAs78wwGkpGD8OHtZ99AGgI1C06H9qxZRNXTVBJ99fREVSX5hchFfqXoA4RaWeFvcPiWN5u2XZ68AbHzUplMfC2bCGByG0xxULaa99rGDUHUJBjFXBx/Pq9UI1lzeGZR35gPhE1BjBamymno5RMXA+LCW5pl1xcmTnUQJzQUHni7FjpxO3g24CVCtMXyatqnthScRAcOGRlHjDStMEvh2eTAtf88F9KnmmGurbsJ9z72Fu5ABn7psTETJBZX5QwRHGfgQhVZLwg5dk/rQQj/t6w60wDFktnUhlIPT6G1DBI9EcbzzkrSe6EPM4wlA1qOPGQ3S2BnuKszwN041Vz16ucp5AzcAc4D8YTMdPZL5lfG01MeztNyYDCL7/IuR7FarbAtge5OGz7B0hGFLPiIFbgdThpnMnNRT46SWJRLgnYC1loA+Z+5QbMTUZJG5HJJk56EVZOaHRMulLknrsIBig0QvG/sFMl4u1tT3xDZYxIJZoC95rfElKYz+c273ZwwU5l6531ceiWiIOkacgQ8ln1joJoF6GB1XqyRpiNnUVsAnEPdyAWEMFYZy3n6tto21qO3T2NQUAYDerNUennzqVs9bQwohNwsxX6F3JuhzmJ4Rr4mpYyKctN0EHL3kRgarrmS62dHO9U6tavrMyvwHfiyrKCqbIl89T1q/08MIIHGWtN
